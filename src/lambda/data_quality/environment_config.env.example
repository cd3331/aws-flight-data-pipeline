# Data Quality Configuration Environment Variables
# Copy this file to .env and customize for your environment

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================
ENVIRONMENT=dev
LOG_LEVEL=INFO

# =============================================================================
# QUALITY THRESHOLD CONFIGURATION
# =============================================================================

# Quality Score Thresholds (0.0 - 1.0 scale)
QUALITY_EXCELLENT_THRESHOLD=0.95        # A grade threshold
QUALITY_GOOD_THRESHOLD=0.85             # B grade threshold  
QUALITY_ACCEPTABLE_THRESHOLD=0.75       # C grade threshold
QUALITY_POOR_THRESHOLD=0.65             # D grade threshold (below is F)

# Dimensional Quality Thresholds
QUALITY_COMPLETENESS_CRITICAL=0.60      # Critical missing data threshold
QUALITY_VALIDITY_CRITICAL=0.70          # Critical invalid data threshold
QUALITY_CONSISTENCY_CRITICAL=0.65       # Critical inconsistency threshold
QUALITY_TIMELINESS_CRITICAL=0.80        # Critical staleness threshold

# Quarantine Thresholds
QUALITY_QUARANTINE_THRESHOLD=0.50       # Automatic quarantine threshold
QUALITY_REVIEW_THRESHOLD=0.65           # Manual review required threshold

# Batch-level Quality Thresholds
BATCH_FAILURE_RATE_THRESHOLD=0.20       # 20% batch failure rate
BATCH_QUARANTINE_RATE_THRESHOLD=0.15    # 15% batch quarantine rate

# =============================================================================
# ANOMALY DETECTION CONFIGURATION
# =============================================================================

# Physical Limits
ANOMALY_MIN_ALTITUDE=-1000              # Minimum altitude in feet
ANOMALY_MAX_ALTITUDE=60000              # Maximum altitude in feet
ANOMALY_MIN_SPEED=0                     # Minimum ground speed in knots
ANOMALY_MAX_SPEED=800                   # Maximum ground speed in knots

# Statistical Anomaly Detection
ANOMALY_Z_SCORE_THRESHOLD=3.0           # Z-score threshold for outliers
ANOMALY_IQR_MULTIPLIER=1.5              # IQR multiplier for outlier detection
ANOMALY_PERCENTILE_THRESHOLD=0.05       # Percentile threshold (95th/5th)

# Position and Movement Anomalies
ANOMALY_MAX_POSITION_JUMP=100           # Max position jump in kilometers
ANOMALY_MAX_ALTITUDE_CHANGE=10000       # Max altitude change per minute (feet)
ANOMALY_MAX_SPEED_CHANGE=100            # Max speed change per minute (knots)

# Stuck Aircraft Detection
ANOMALY_STUCK_POSITION_THRESHOLD=0.1    # Position variance threshold (km)
ANOMALY_STUCK_ALTITUDE_THRESHOLD=50     # Altitude variance threshold (feet)
ANOMALY_STUCK_SPEED_THRESHOLD=5         # Speed variance threshold (knots)
ANOMALY_STUCK_TIME_WINDOW=10            # Time window for stuck detection (minutes)

# Temporal Anomalies
ANOMALY_MAX_DATA_AGE=30                 # Maximum data age in minutes
ANOMALY_FUTURE_DATA_TOLERANCE=5         # Future timestamp tolerance (minutes)

# Geographic Boundaries (JSON format)
ANOMALY_GEOGRAPHIC_BOUNDARIES='{"continental_us": {"min_lat": 24.0, "max_lat": 49.0, "min_lon": -125.0, "max_lon": -66.0}, "europe": {"min_lat": 35.0, "max_lat": 71.0, "min_lon": -10.0, "max_lon": 40.0}}'

# =============================================================================
# CLOUDWATCH METRICS CONFIGURATION
# =============================================================================

# CloudWatch Settings
METRICS_NAMESPACE=FlightDataPipeline
METRICS_ENVIRONMENT_DIMENSION=Environment
METRICS_PIPELINE_DIMENSION=PipelineStage

# Publishing Configuration
METRICS_MAX_BATCH_SIZE=20               # Max metrics per CloudWatch batch
METRICS_PUBLISH_INTERVAL=60             # Publish interval in seconds
METRICS_RESOLUTION=60                   # Metric resolution in seconds

# Dimension Configuration
METRICS_INCLUDE_AIRCRAFT_TYPE=true      # Include aircraft type dimension
METRICS_INCLUDE_DATA_SOURCE=true        # Include data source dimension
METRICS_INCLUDE_GEOGRAPHIC=false        # Include geographic dimension

# Retention Configuration
METRICS_DETAILED_RETENTION_DAYS=7       # Detailed metrics retention
METRICS_SUMMARY_RETENTION_DAYS=90       # Summary metrics retention

# =============================================================================
# QUARANTINE SYSTEM CONFIGURATION
# =============================================================================

# S3 Configuration
QUARANTINE_BUCKET=flight-data-quarantine-dev    # S3 bucket for quarantined data
QUARANTINE_PREFIX=quarantined-data               # S3 key prefix

# DynamoDB Configuration
QUARANTINE_TABLE=flight-data-quarantine-metadata-dev  # DynamoDB table name

# Retention and Cleanup
QUARANTINE_RETENTION_DAYS=30            # Quarantine retention period
QUARANTINE_AUTO_CLEANUP=true            # Enable automatic cleanup
QUARANTINE_CLEANUP_BATCH_SIZE=100       # Cleanup batch size

# Review Workflow
QUARANTINE_AUTO_REVIEW=true             # Enable automatic review
QUARANTINE_MANUAL_REVIEW_SCORE=0.40     # Score requiring manual review
QUARANTINE_REVIEW_SLA_HOURS=24          # Review SLA in hours

# Performance Limits
QUARANTINE_MAX_SIZE_MB=1024             # Max quarantine entry size (MB)
QUARANTINE_MAX_BATCH_COUNT=1000         # Max records per batch quarantine

# =============================================================================
# ALERTING CONFIGURATION
# =============================================================================

# Alert Thresholds
ALERT_QUALITY_DEGRADATION_THRESHOLD=0.10    # 10% quality degradation
ALERT_ANOMALY_RATE_THRESHOLD=0.05            # 5% anomaly rate
ALERT_QUARANTINE_RATE_THRESHOLD=0.15         # 15% quarantine rate
ALERT_PROCESSING_DELAY_THRESHOLD=15          # Processing delay threshold (minutes)
ALERT_ERROR_RATE_THRESHOLD=0.02              # 2% error rate

# Alert Delivery Configuration
ALERT_SNS_TOPIC_ARN=arn:aws:sns:us-east-1:123456789012:flight-data-alerts
ALERT_EMAIL_RECIPIENTS=admin@example.com,ops-team@example.com
ALERT_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
ALERT_PAGERDUTY_INTEGRATION_KEY=your-pagerduty-integration-key

# Alert Management
ALERT_SUPPRESSION_WINDOW_MINUTES=30     # Alert suppression window
ALERT_ESCALATION_DELAY_MINUTES=60       # Alert escalation delay
ALERT_MAX_ALERTS_PER_HOUR=10            # Rate limiting

# =============================================================================
# PROCESSING PIPELINE CONFIGURATION
# =============================================================================

# Batch Processing
PROCESSING_MAX_BATCH_SIZE=1000          # Maximum batch size
PROCESSING_BATCH_TIMEOUT=300            # Batch timeout in seconds
PROCESSING_MAX_CONCURRENT_BATCHES=10    # Max concurrent batch processing

# Memory and Performance
PROCESSING_MAX_MEMORY_MB=2048           # Maximum memory usage
PROCESSING_TIMEOUT=900                  # Processing timeout in seconds

# Historical Data
PROCESSING_HISTORICAL_WINDOW_HOURS=24   # Historical data window
PROCESSING_MAX_HISTORICAL_RECORDS=10000 # Max historical records to analyze

# Error Handling
PROCESSING_MAX_RETRIES=3                # Maximum retry attempts
PROCESSING_RETRY_DELAY=5                # Retry delay in seconds
PROCESSING_EXPONENTIAL_BACKOFF=true     # Enable exponential backoff

# =============================================================================
# AWS RESOURCE CONFIGURATION
# =============================================================================

# AWS Region (usually set by Lambda runtime)
AWS_DEFAULT_REGION=us-east-1

# Lambda Configuration
LAMBDA_FUNCTION_NAME=flight-data-quality-validator
LAMBDA_TIMEOUT=900
LAMBDA_MEMORY=2048

# =============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# =============================================================================

# Development Environment
# - More lenient thresholds for testing
# - More frequent alerts for debugging
# - Shorter retention periods to reduce costs

# Staging Environment  
# - Production-like thresholds
# - Reduced alert frequency
# - Standard retention periods

# Production Environment
# - Strict thresholds
# - Critical alerts only
# - Extended retention periods
# - Enhanced monitoring and logging

# =============================================================================
# SECURITY AND COMPLIANCE
# =============================================================================

# Encryption
# All data is encrypted at rest and in transit
# KMS key IDs can be specified for additional encryption control

# Access Control
# IAM roles and policies control access to resources
# Cross-account access can be configured via resource policies

# Audit Logging
# All actions are logged to CloudTrail
# Application logs include audit events for compliance

# Data Privacy
# PII detection and masking capabilities
# Geographic data restrictions can be enforced

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# CloudWatch Dashboards
DASHBOARD_NAME=FlightDataQualityDashboard

# X-Ray Tracing
XRAY_TRACING_ENABLED=true

# Custom Metrics
CUSTOM_METRICS_ENABLED=true

# Log Groups
LOG_GROUP_NAME=/aws/lambda/flight-data-quality-validator
LOG_RETENTION_DAYS=30

# =============================================================================
# INTEGRATION SETTINGS
# =============================================================================

# External APIs
OPENSKY_API_ENDPOINT=https://opensky-network.org/api
EXTERNAL_API_TIMEOUT=30
EXTERNAL_API_RETRY_COUNT=3

# Data Sources
PRIMARY_DATA_SOURCE=opensky_network
BACKUP_DATA_SOURCES=adsb_exchange,flightaware

# Downstream Systems
PROCESSED_DATA_BUCKET=flight-data-processed
ANALYTICS_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/123456789012/flight-analytics
NOTIFICATION_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/123456789012/flight-notifications